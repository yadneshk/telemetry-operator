apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 100
collectors:
- type: command
  command: oc get ipset edpm-compute-0 -o yaml -n telemetry-kuttl-tests
- type: command
  command: oc get netconfig -n telemetry-kuttl-tests
- type: command
  command: oc get dnsmasq -n telemetry-kuttl-tests
- type: command
  command: oc get osdpns openstack-edpm-ipam -o yaml -n telemetry-kuttl-tests
- type: command
  command: oc get osdpd -n telemetry-kuttl-tests
- type: command
  command: oc get scrapeconfigs -n telemetry-kuttl-tests
- type: command
  command: oc get scrapeconfigs telemetry-node-exporter -o yaml -n telemetry-kuttl-tests
- type: command
  command: oc get scrapeconfigs telemetry-node-exporter-tls -o yaml -n telemetry-kuttl-tests
- type: command
  command: oc -n telemetry-kuttl-tests get secret dataplanenodeset-openstack-edpm-ipam -o jsonpath='{.data.inventory}' | base64 --decode
---
apiVersion: monitoring.rhobs/v1alpha1
kind: ScrapeConfig
metadata:
  labels:
    service: metricStorage
  name: telemetry-kepler
  namespace: telemetry-kuttl-tests
  ownerReferences:
  - apiVersion: telemetry.openstack.org/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: MetricStorage
    name: telemetry-kuttl
spec:
  metricRelabelings:
  - action: labeldrop
    regex: pod
  - action: labeldrop
    regex: namespace
  - action: labeldrop
    regex: job
  - action: labeldrop
    regex: publisher
  staticConfigs:
  - targets:
    - 192.168.122.100:8888
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    console.openshift.io/dashboard: "true"
  name: grafana-dashboard-openstack-kepler
  namespace: openshift-config-managed
